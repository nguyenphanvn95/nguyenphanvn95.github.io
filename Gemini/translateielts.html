<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luyện Dịch IELTS - Gemini Practice</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" href="ielts.png">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --danger-color: #ea4335;
            --warning-color: #fbbc05;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-color: #dee2e6;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e0f7fa, #f5f7fa);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
      /* === HEADER === */
header {
    background: linear-gradient(120deg, #4285f4, #34a853);
    color: white;
    padding: 25px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}
.logo {
    display: flex;
    align-items: center;
    gap: 15px;
}
.logo i {
    font-size: 2.8rem;
    color: white;
}
.logo-text {
    display: flex;
    flex-direction: column;
}
.header-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 5px;
    color: white;
}
.subtitle {
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.9);
}
.header-actions {
    display: flex;
    gap: 15px;
    margin-top: 10px;
}
a.btn {
    text-decoration: none;
}

/* === FOOTER === */
footer {
    background: linear-gradient(120deg, #2c3e50, #34495e);
    color: white;
    padding: 40px 20px 25px;
    text-align: center;
}
.footer-content {
    max-width: 800px;
    margin: 0 auto;
}
.footer-title {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 25px;
    line-height: 1.4;
}
.footer-links {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}
.footer-links a {
    color: #bdc3c7;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: color 0.3s;
}
.footer-links a:hover {
    color: white;
}
.footer-links i {
    font-size: 0.9em;
}
.footer-copyright {
    color: #95a5a6;
    font-size: 0.95rem;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

        
        /* Nút quản lý API */
        .api-key-manager {
            text-align: center;
            margin: 20px 0 30px;
        }
        
        .api-key-btn {
            padding: 10px 20px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(66, 133, 244, 0.2);
        }
        
        .api-key-btn:hover {
            background-color: #3367d6;
            transform: translateY(-2px);
        }
        
        .api-key-btn i {
            font-size: 1.1rem;
        }
        
        /* Phần cài đặt API */
        .api-key-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 0 auto 30px;
            max-width: 600px;
            display: none;
        }
        
        .api-key-container.visible {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .api-key-input {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .api-key-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .api-key-input button {
            padding: 12px 20px;
            background-color: #34a853;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .api-key-input button:hover {
            background-color: #2d9247;
        }
        
        .error-message {
            color: #e74c3c;
            margin-top: 8px;
            display: none;
        }
        
        .close-api-btn {
            float: right;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
            transition: color 0.3s;
        }
        
        .close-api-btn:hover {
            color: #e74c3c;
        }
        
        /* Phần chọn Task */
        .task-selection {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .task-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            width: 300px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .task-card.selected {
            border: 2px solid #4285f4;
            background-color: #f8faff;
        }
        
        .task-card i {
            font-size: 2.5rem;
            color: #4285f4;
            margin-bottom: 15px;
        }
        
        .task-card h2 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .task-card p {
            color: #7f8c8d;
        }
        
        /* Danh sách bài mẫu */
        .exercises-section {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            position: relative;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #4285f4;
        }
        
        .back-btn {
            padding: 8px 16px;
            background-color: #f1f3f4;
            color: #5f6368;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            background-color: #e8eaed;
        }
        
        .exercises-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .exercise-card {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #eee;
        }
        
        .exercise-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #4285f4;
        }
        
        .exercise-card.selected {
            border: 2px solid #4285f4;
            background-color: #f0f7ff;
        }
        
        .exercise-card h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2c3e50;
        }
        
        .exercise-card h3 i {
            color: #4285f4;
        }
        
        .exercise-meta {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .exercise-tag {
            background-color: #e8f4ff;
            color: #4285f4;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .exercise-description {
            color: #555;
            font-size: 0.9rem;
            margin-top: 10px;
            max-height: 60px;
            overflow: hidden;
            position: relative;
        }
        
        .exercise-description::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(to bottom, rgba(248, 249, 250, 0), #f8f9fa);
        }
         .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }
        
        .btn-sm {
            padding: 8px 14px;
            font-size: 0.9rem;
        }
        
        .btn-primary {
            background: linear-gradient(120deg, #4285f4, #5b9bf8);
            color: white;
            box-shadow: 0 3px 10px rgba(66, 133, 244, 0.25);
        }
        
        .btn-primary:hover {
            background: linear-gradient(120deg, #3b78e0, #4f8df0);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.35);
        }
        /* Phần luyện dịch */
        .practice-section {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            position: relative;
        }
        
        .practice-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-right: 100px;
        }
        
        .exercise-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .full-description {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            line-height: 1.6;
            border: 1px solid #eee;
        }
        
        .full-description img {
            max-width: 100%;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #ddd;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        
        .original-section, .translation-section {
            margin-bottom: 30px;
        }
        
        .english-text {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            white-space: pre-wrap;
            line-height: 1.8;
            border: 1px solid #eee;
        }
        
        .current-sentence {
            font-weight: bold;
            margin: 15px 0;
            padding: 12px;
            background-color: #f0f7ff;
            border-left: 4px solid #4285f4;
            border-radius: 0 6px 6px 0;
        }
        
        .translation-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            resize: vertical;
            font-family: inherit;
        }
        
        .translation-input:focus {
            outline: none;
            border-color: #4285f4;
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }
        
        .translation-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .translation-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .hint-btn {
            background-color: #f39c12;
            color: white;
        }
        
        .hint-btn:hover {
            background-color: #e67e22;
            transform: translateY(-2px);
        }
        
        .submit-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .submit-btn:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }
        
        .next-btn {
            background-color: #4285f4;
            color: white;
        }
        
        .next-btn:hover {
            background-color: #3367d6;
            transform: translateY(-2px);
        }
        
        .feedback-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            border: 1px solid #eee;
        }
        
        .feedback-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #2c3e50;
        }
        
        .feedback-content {
            line-height: 1.8;
        }
        
        /* Phân trang */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            padding: 15px 0;
        }
        
        .pagination-btn {
            padding: 8px 16px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .pagination-btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .pagination-btn:not(:disabled):hover {
            background-color: #3367d6;
            transform: translateY(-2px);
        }
        
        #page-info {
            font-weight: bold;
            min-width: 80px;
            text-align: center;
            color: #2c3e50;
        }
        
        /* Phím tắt */
        .shortcut-hint {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #7f8c8d;
            background: #f8f9fa;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }
        
        .shortcut-hint div {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .key {
            background-color: #eaeaea;
            padding: 4px 10px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
            color: #333;
        }
        
        /* Thông báo */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Loading */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Debug panel */
        .debug-panel {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 30px;
            font-family: monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .debug-toggle {
            background-color: #34495e;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .debug-content {
            display: none;
        }
        
        /* Kết quả tổng hợp */
        .results-summary {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .results-title {
            margin-bottom: 20px;
            text-align: center;
            color: #2c3e50;
        }
        
        .results-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .original-text, .translated-text {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #eee;
        }
        
        .original-text h3, .translated-text h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        @media (max-width: 768px) {
            .results-content {
                grid-template-columns: 1fr;
            }
            
            .task-selection {
                flex-direction: column;
                align-items: center;
            }
            
            .task-card {
                width: 100%;
                max-width: 400px;
            }
            
            .exercises-list {
                grid-template-columns: 1fr;
            }
        }
.app-container {
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
            .btn-secondary {
            background: linear-gradient(120deg, #34a853, #48c76d);
            color: white;
            box-shadow: 0 3px 10px rgba(52, 168, 83, 0.25);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(120deg, #2d9447, #3db35c);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 168, 83, 0.35);
        }

/* Layout 2 cột cho phần luyện dịch */
.practice-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 25px;
    margin-bottom: 25px;
}

@media (min-width: 992px) {
    .practice-container {
        grid-template-columns: 1fr 1fr;
    }
}

.left-column, .right-column {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* Hiển thị nổi bật câu đang dịch trong bài viết */
.english-text .current-sentence {
    background-color: #fff3cd !important;
    padding: 3px 6px;
    border-radius: 4px;
    font-weight: 600;
    display: inline;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    color: #d35400;
    border: 1px solid #ffc107;
}

/* Hiệu ứng khi di chuột qua câu */
.english-text .current-sentence:hover {
    background-color: #ffecb3 !important;
    cursor: pointer;
    transform: scale(1.01);
    transition: all 0.2s ease;
}

/* Làm nổi bật phần câu đang dịch riêng */
#current-sentence-container {
    background: #e8f4fc;
    border-left: 4px solid #4285f4;
    padding: 15px;
    border-radius: 0 8px 8px 0;
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

#current-sentence {
    font-size: 1.15rem;
    line-height: 1.7;
    font-weight: 500;
    color: #2c3e50;
    padding: 8px;
    background: #ffffff;
    border-radius: 6px;
}

/* Điều chỉnh kích thước các phần tử */
.english-text {
    min-height: 250px;
}

.translation-input {
    min-height: 150px;
}

/* Responsive cho mobile */
@media (max-width: 991px) {
    .left-column, .right-column {
        gap: 15px;
    }
    
    .english-text {
        min-height: 200px;
    }
}
    </style>
</head>
<body>
    <div class="app-container">
<header>
    <div class="logo">
        <i class="fas fa-language"></i>
        <div class="logo-text">
            <h1 class="header-title">Luyện Dịch IELTS</h1>
            <p class="subtitle">Nâng cao kỹ năng dịch thuật với trí tuệ nhân tạo Gemini</p>
        </div>
    </div>
    
    <div class="header-actions">
        <a href="ielts_manager.html" class="btn btn-secondary">
           <i class="fas fa-database"></i> Quản lý dữ liệu IELTS
        </a>
        <a href="checkielts.html" class="btn btn-secondary">
            <i class="fas fa-check-circle"></i> Chấm điểm IELTS
        </a>
    </div>
</header>
<div class="api-key-manager">
                <button class="api-key-btn" id="api-key-btn">
                    <i class="fas fa-key"></i> Quản lý API Key
                </button>
            </div>
        <!-- Phần cài đặt API -->
        <div class="api-key-container" id="api-key-container">
            <button class="close-api-btn" id="close-api-btn">&times;</button>
            <h3><i class="fas fa-key"></i> Cài đặt Gemini API Key</h3>
            <p>Bạn cần API key để sử dụng ứng dụng. Lấy key tại <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a>.</p>
            
            <div class="api-key-input">
                <input type="password" id="api-key" placeholder="Nhập API key của bạn...">
                <button id="save-api-key"><i class="fas fa-save"></i> Lưu</button>
            </div>
            <div class="error-message" id="api-key-error"></div>
        </div>

        <div class="debug-panel" id="debug-panel">
            <button class="debug-toggle" id="debug-toggle">
                <i class="fas fa-bug"></i> Hiển thị thông tin gỡ lỗi
            </button>
            <div class="debug-content" id="debug-content"></div>
        </div> 

        <div class="task-selection" id="task-selection">
            <div class="task-card" data-task="task1">
                <i class="fas fa-chart-line"></i>
                <h2>Task 1</h2>
                <p>Luyện dịch các bài viết mô tả biểu đồ, bảng biểu, quy trình</p>
            </div>
            <div class="task-card" data-task="task2">
                <i class="fas fa-comments"></i>
                <h2>Task 2</h2>
                <p>Luyện dịch các bài luận, tranh luận về các chủ đề học thuật</p>
            </div>
        </div>

        <div class="exercises-section" id="exercises-section">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-list"></i> Chọn Bài Mẫu:</h2>
                <button class="back-btn" id="back-to-task-btn">
                    <i class="fas fa-arrow-left"></i> Chọn Task khác
                </button>
            </div>
            <div class="exercises-list" id="exercises-list">
                <!-- Bài tập sẽ được thêm động ở đây -->
            </div>
            
            <!-- Phần phân trang -->
            <div class="pagination" id="pagination">
                <button id="prev-page" class="pagination-btn">
                    <i class="fas fa-chevron-left"></i> Trang trước
                </button>
                <span id="page-info">Trang 1/1</span>
                <button id="next-page" class="pagination-btn">
                    Trang sau <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="practice-section" id="practice-section">
            <button class="back-btn" id="back-btn">
                <i class="fas fa-arrow-left"></i> Quay lại
            </button>
            
            <div class="practice-header">
                <div class="exercise-title" id="exercise-title">Đang tạo bài tập...</div>
                <div class="exercise-meta">
                    <div class="exercise-tag" id="exercise-task">...</div>
                    <div class="exercise-tag" id="exercise-band">...</div>
                </div>
            </div>
            
            <div class="full-description" id="full-description">
                <!-- Mô tả đầy đủ sẽ được thêm ở đây -->
            </div>
            
            <div class="practice-container">
    <!-- Cột trái: Bài viết mẫu -->
    <div class="left-column">
        <div class="original-section">
            <h3 class="section-title"><i class="fas fa-book"></i> Bài viết mẫu:</h3>
            <div class="english-text" id="english-text">
                Đang tải nội dung...
            </div>
        </div>
    </div>
    
    <!-- Cột phải: Câu đang dịch + Dịch + Feedback -->
    <div class="right-column">
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
        </div>
        <div class="progress-text" id="progress-text">Câu 0/0</div>
        
        <div id="current-sentence-container" style="display:none;">
            <h3 class="section-title"><i class="fas fa-pencil-alt"></i> Câu đang dịch:</h3>
            <div class="current-sentence" id="current-sentence"></div>
        </div>
        
        <div class="translation-container">
            <h3 class="section-title"><i class="fas fa-exchange-alt"></i> Dịch sang tiếng Việt:</h3>
            <textarea class="translation-input" id="current-translation" placeholder="Nhập bản dịch của bạn..."></textarea>
            
            <div class="shortcut-hint">
                <div>
                    <span class="key">H</span> Gợi ý từ khóa
                </div>
                <div>
                    <span class="key">Enter</span> Kiểm tra
                </div>
                <div>
                    <span class="key">Shift</span> + <span class="key">Enter</span> Câu tiếp
                </div>
                <div>
                    <span class="key">Tab</span> Focus ô dịch
                </div>
            </div>
            
            <div class="translation-actions">
                <button class="translation-btn hint-btn" id="hint-btn">
                    <i class="fas fa-lightbulb"></i> Gợi ý từ khóa
                </button>
                <button class="translation-btn submit-btn" id="submit-btn">
                    <i class="fas fa-check"></i> Kiểm tra
                </button>
                <button class="translation-btn next-btn" id="next-btn">
                    <i class="fas fa-arrow-right"></i> Câu tiếp
                </button>
            </div>
            
            <div class="feedback-section" id="feedback-section">
                <div class="feedback-title"><i class="fas fa-comment-alt"></i> Nhận xét:</div>
                <div class="feedback-content markdown-content" id="feedback-content"></div>
            </div>
        </div>
    </div>
</div>
            
            <div class="overall-feedback-container" id="overall-feedback-container">
                <h3 class="overall-title"><i class="fas fa-star"></i> Đánh Giá Tổng Thể</h3>
                <div class="overall-feedback markdown-content" id="overall-feedback">
                    Nhấn "Gửi đánh giá" để nhận nhận xét tổng thể từ AI về bản dịch của bạn.
                </div>
                <div class="overall-actions">
                    <button class="action-btn new-exercise-btn" id="new-exercise-btn">
                        <i class="fas fa-sync-alt"></i> Bài Tập Mới
                    </button>
                    <button class="action-btn submit-all-btn" id="submit-all-btn">
                        <i class="fas fa-paper-plane"></i> Gửi Đánh Giá
                    </button>
                </div>
            </div>
        </div>

        <div class="results-summary" id="results-summary">
            <h2 class="results-title">Kết Quả Tổng Hợp</h2>
            <div class="results-content">
                <div class="original-text">
                    <h3>Bài viết gốc:</h3>
                    <div id="original-summary"></div>
                </div>
                <div class="translated-text">
                    <h3>Bản dịch của bạn:</h3>
                    <div id="translation-summary"></div>
                </div>
            </div>
        </div>
        
        <div class="notification" id="notification"></div>
 
<footer>
            <div class="footer-content">
                <p class="footer-title">Học, học nữa, học mãi - V.I. Lê nin</p>
                <div class="footer-links">
                    <a href="https://nguyenphanvn95.github.io"><i class="fas fa-home"></i> Trang chủ</a>
                    <a href="mailto:nguyenphanvn95@gmail.com"><i class="fas fa-envelope"></i> Liên hệ</a>
                    <a href="https://github.com/nguyenphanvn95"><i class="fa-brands fa-github"></i> Phan's Github</a>
                </div>
                <p class="footer-copyright">© 2025 Nguyễn Văn Phán. Tất cả quyền được bảo lưu.</p>
            </div>
        </footer>
   </div>
    <script>
        // DOM Elements
        const apiKeyBtn = document.getElementById('api-key-btn');
        const apiKeyContainer = document.getElementById('api-key-container');
        const closeApiBtn = document.getElementById('close-api-btn');
        const apiKeyInput = document.getElementById('api-key');
        const saveApiKeyBtn = document.getElementById('save-api-key');
        const taskCards = document.querySelectorAll('.task-card');
        const exercisesSection = document.getElementById('exercises-section');
        const exercisesList = document.getElementById('exercises-list');
        const practiceSection = document.getElementById('practice-section');
        const englishTextEl = document.getElementById('english-text');
        const exerciseTitle = document.getElementById('exercise-title');
        const exerciseTask = document.getElementById('exercise-task');
        const exerciseBand = document.getElementById('exercise-band');
        const fullDescriptionEl = document.getElementById('full-description');
        const currentSentenceEl = document.getElementById('current-sentence');
        const currentTranslationEl = document.getElementById('current-translation');
        const feedbackSection = document.getElementById('feedback-section');
        const feedbackContentEl = document.getElementById('feedback-content');
        const hintBtn = document.getElementById('hint-btn');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const overallFeedbackContainer = document.getElementById('overall-feedback-container');
        const overallFeedback = document.getElementById('overall-feedback');
        const newExerciseBtn = document.getElementById('new-exercise-btn');
        const submitAllBtn = document.getElementById('submit-all-btn');
        const apiKeyError = document.getElementById('api-key-error');
        const resultsSummary = document.getElementById('results-summary');
        const originalSummary = document.getElementById('original-summary');
        const translationSummary = document.getElementById('translation-summary');
        const notification = document.getElementById('notification');
        const debugPanel = document.getElementById('debug-panel');
        const debugToggle = document.getElementById('debug-toggle');
        const debugContent = document.getElementById('debug-content');
        const pagination = document.getElementById('pagination');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const pageInfo = document.getElementById('page-info');
        const backBtn = document.getElementById('back-btn');
        const backToTaskBtn = document.getElementById('back-to-task-btn');
        const taskSelection = document.getElementById('task-selection');
        
        // App State
        let selectedTask = null;
        let apiKey = null;
        let currentText = "";
        let sentences = [];
        let userTranslations = [];
        let currentSentenceIndex = 0;
        let generatedExercises = [];
        let selectedExercise = null;
        let exercisesData = {};
        let currentPage = 1;
        const exercisesPerPage = 6;

        // Gemini API Endpoint
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';
        
        // Configure Marked.js
        marked.setOptions({
            breaks: true,
            gfm: true
        });

        // Show notification
        function showNotification(message, isError = true) {
            notification.textContent = message;
            notification.style.backgroundColor = isError ? '#e74c3c' : '#2ecc71';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        // Toggle API key section
        apiKeyBtn.addEventListener('click', () => {
            apiKeyContainer.classList.toggle('visible');
        });

        closeApiBtn.addEventListener('click', () => {
            apiKeyContainer.classList.remove('visible');
        });

        // Process image links in descriptions
        function processImageLinks(text) {
            // Replace [[image_url]] with <img> tags
            return text.replace(/\[\[(https?:\/\/[^\]]+)\]\]/g, (match, url) => {
                return `<img src="${url}" alt="Hình minh họa">`;
            });
        }

        // Extract text without images for short description
        function getShortDescription(text) {
            // Remove image tags for short description
            return text.replace(/\[\[https?:\/\/[^\]]+\]\]/g, '').substring(0, 100) + '...';
        }

        // Load exercises data from JSON files
        async function loadExercisesData() {
            try {
                // Load Task 1 data
                const response1 = await fetch('task1Data.json');
                if (!response1.ok) throw new Error('Không thể tải dữ liệu Task 1');
                const task1Data = await response1.json();
                
                // Load Task 2 data
                const response2 = await fetch('task2Data.json');
                if (!response2.ok) throw new Error('Không thể tải dữ liệu Task 2');
                const task2Data = await response2.json();
                
                // Combine into exercisesData object
                exercisesData = {
                    task1: task1Data,
                    task2: task2Data
                };
            } catch (error) {
                console.error('Error loading exercises data:', error);
                showNotification('Có lỗi khi tải dữ liệu bài tập. Vui lòng thử lại.');
                logDebugInfo("Lỗi tải dữ liệu bài tập", error.message);
            }
        }

        // Load saved API key if exists
        window.addEventListener('DOMContentLoaded', () => {
            const savedApiKey = localStorage.getItem('gemini_api_key');
            if (savedApiKey) {
                apiKeyInput.value = savedApiKey;
                apiKey = savedApiKey;
            }
            
            // Load exercises data
            loadExercisesData();
        });

        // Save API key
        saveApiKeyBtn.addEventListener('click', () => {
            apiKey = apiKeyInput.value.trim();
            if (apiKey) {
                localStorage.setItem('gemini_api_key', apiKey);
                apiKeyError.style.display = 'none';
                showNotification('API key đã được lưu thành công!', false);
                apiKeyContainer.classList.remove('visible');
            } else {
                apiKeyError.textContent = 'Vui lòng nhập API key hợp lệ.';
                apiKeyError.style.display = 'block';
            }
        });

        // Select task
        taskCards.forEach(card => {
            card.addEventListener('click', () => {
                taskCards.forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedTask = card.getAttribute('data-task');
                
                // Load exercises for selected task
                loadExercisesForTask();
            });
        });

        // Back button in practice section
        backBtn.addEventListener('click', () => {
            practiceSection.style.display = 'none';
            exercisesSection.style.display = 'block';
            exercisesSection.scrollIntoView({ behavior: 'smooth' });
        });

        // Back to task selection button
        backToTaskBtn.addEventListener('click', () => {
            exercisesSection.style.display = 'none';
            taskSelection.style.display = 'flex';
            taskSelection.scrollIntoView({ behavior: 'smooth' });
        });

        // Load exercises for selected task
        function loadExercisesForTask() {
            if (!selectedTask || !exercisesData[selectedTask]) return;
            
            generatedExercises = exercisesData[selectedTask];
            currentPage = 1;
            renderExercisesList();
            
            // Show exercises list
            exercisesSection.style.display = 'block';
            taskSelection.style.display = 'none';
            
            // Scroll to exercises section
            exercisesSection.scrollIntoView({ behavior: 'smooth' });
        }

        // Render exercises list
        function renderExercisesList() {
            exercisesList.innerHTML = '';
            
            // Calculate exercises for current page
            const startIndex = (currentPage - 1) * exercisesPerPage;
            const endIndex = startIndex + exercisesPerPage;
            const currentExercises = generatedExercises.slice(startIndex, endIndex);
            
            currentExercises.forEach((exercise, index) => {
                const realIndex = startIndex + index;
                const exerciseCard = document.createElement('div');
                exerciseCard.className = 'exercise-card';
                exerciseCard.dataset.index = realIndex;
                
                // Process description with image links
                const shortDescription = getShortDescription(exercise.description);
                
                exerciseCard.innerHTML = `
                    <h3><i class="fas fa-file-alt"></i> ${exercise.title}</h3>
                    <div class="exercise-description">${shortDescription}</div>
                    <div class="exercise-meta">
                        <div class="exercise-tag">${selectedTask.toUpperCase()}</div>
                        <div class="exercise-tag">Band ${exercise.band}</div>
                    </div>
                `;
                
                exerciseCard.addEventListener('click', () => {
                    document.querySelectorAll('.exercise-card').forEach(card => {
                        card.classList.remove('selected');
                    });
                    exerciseCard.classList.add('selected');
                    selectedExercise = realIndex;
                    
                    // Start exercise after 500ms
                    setTimeout(() => {
                        startSelectedExercise();
                    }, 500);
                });
                
                exercisesList.appendChild(exerciseCard);
            });
            
            // Update pagination
            const totalPages = Math.ceil(generatedExercises.length / exercisesPerPage);
            
            if (totalPages > 1) {
                pagination.style.display = 'flex';
                pageInfo.textContent = `Trang ${currentPage}/${totalPages}`;
                
                // Update button states
                prevPageBtn.disabled = currentPage === 1;
                nextPageBtn.disabled = currentPage === totalPages;
            } else {
                pagination.style.display = 'none';
            }
        }

        // Pagination event handlers
        prevPageBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderExercisesList();
                exercisesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        nextPageBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(generatedExercises.length / exercisesPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderExercisesList();
                exercisesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        // Start selected exercise
        async function startSelectedExercise() {
            if (selectedExercise === null) return;
            
            const exercise = generatedExercises[selectedExercise];
            exerciseTitle.textContent = exercise.title;
            exerciseTask.textContent = selectedTask.toUpperCase();
            exerciseBand.textContent = `Band ${exercise.band}`;
            
            try {
                // Process full description with images
                const processedDescription = processImageLinks(exercise.description);
                fullDescriptionEl.innerHTML = processedDescription;
                
                // Use the predefined English text from the JSON
                currentText = exercise.englishText;
                englishTextEl.textContent = currentText;
                
                // Split text into sentences
                sentences = splitTextIntoSentences(currentText);
                
                // Reset translations
                userTranslations = new Array(sentences.length).fill('');
                currentSentenceIndex = 0;
                
                // Hide exercises, show practice section
                exercisesSection.style.display = 'none';
                practiceSection.style.display = 'block';
                overallFeedbackContainer.style.display = 'none';
                resultsSummary.style.display = 'none';
                
                // Scroll to practice section
                practiceSection.scrollIntoView({ behavior: 'smooth' });
                
                // Start with first sentence
                displayCurrentSentence();
                
                // Focus vào ô dịch tự động
                setTimeout(() => {
                    currentTranslationEl.focus();
                }, 300);
                
            } catch (error) {
                console.error('Error starting exercise:', error);
                showNotification('Có lỗi khi tạo nội dung bài tập. Vui lòng thử lại.');
                logDebugInfo("Lỗi tạo nội dung bài tập", error.message);
            }
        }

        // Display current sentence
        function displayCurrentSentence() {
            // Highlight current sentence in the text
            const sentence = sentences[currentSentenceIndex];
            const highlightedText = sentences.map((s, i) => {
                if (i === currentSentenceIndex) {
                    return `<span class="current-sentence">${s}</span>`;
                }
                return s;
            }).join(' ');
            
            englishTextEl.innerHTML = highlightedText;
            
            // Display current sentence for translation
            currentSentenceEl.textContent = sentence;
            currentTranslationEl.value = userTranslations[currentSentenceIndex] || '';
            
            // Clear feedback
            feedbackSection.style.display = 'none';
            feedbackContentEl.innerHTML = '';
            
            // Scroll to current sentence
            const currentSentenceElement = englishTextEl.querySelector('.current-sentence');
            if (currentSentenceElement) {
                currentSentenceElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Call Gemini API
        async function callGeminiAPI(prompt) {
            try {
                const response = await axios.post(
                    `${GEMINI_API_URL}?key=${apiKey}`,
                    {
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    },
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                );
                
                return response.data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error('Gemini API Error:', error);
                if (error.response && error.response.data) {
                    console.error('API Error Details:', error.response.data);
                    if (error.response.data.error && error.response.data.error.message) {
                        throw new Error(`Gemini API: ${error.response.data.error.message}`);
                    }
                }
                throw new Error('Lỗi khi kết nối với Gemini API');
            }
        }

        // Split text into sentences
        function splitTextIntoSentences(text) {
            // Improved sentence splitting
            return text.split(/(?<!\w\.\w.)(?<![A-Z][a-z]\.)(?<=\.|\?|\!|…)\s/);
        }

        // Show hint for current sentence (only keywords)
        async function showHint() {
            const sentence = sentences[currentSentenceIndex];
            if (!sentence) return;
            
            // Get hint from Gemini
            try {
                hintBtn.innerHTML = '<span class="loading"></span> Đang tạo gợi ý...';
                hintBtn.disabled = true;
                
                const prompt = `Hãy đưa ra gợi ý dịch câu sau từ tiếng Anh sang tiếng Việt: "${sentence}". 
                Gợi ý chỉ nên là các từ khóa, cụm từ quan trọng (tối đa 3-5 từ/cụm từ) cần dùng để dịch câu này, 
                không đưa ra cả câu dịch hoàn chỉnh. 
                Trả lời bằng một mảng JSON: { "hints": [ "từ 1", "từ 2", ... ] }`;
                
                const response = await callGeminiAPI(prompt);
                
                // Try to parse JSON response
                let hints = ["Không thể phân tích gợi ý"];
                try {
                    const jsonResponse = JSON.parse(response);
                    if (jsonResponse.hints && Array.isArray(jsonResponse.hints)) {
                        hints = jsonResponse.hints;
                    }
                } catch (e) {
                    console.error('Error parsing hints JSON:', e);
                    // If JSON parsing fails, try to extract hints from text
                    const matches = response.match(/"([^"]+)"/g);
                    if (matches) {
                        hints = matches.map(m => m.replace(/"/g, ''));
                    }
                }
                
                // Display hints
                feedbackContentEl.innerHTML = `
                    <p><strong>Gợi ý từ khóa:</strong></p>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                        ${hints.map(hint => `<span style="background: #e8f4fc; padding: 5px 10px; border-radius: 20px;">${hint}</span>`).join('')}
                    </div>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #6c757d;">
                        <i class="fas fa-info-circle"></i> Sử dụng các từ khóa này để xây dựng câu dịch của bạn.
                    </p>
                `;
                feedbackSection.style.display = 'block';
                
                hintBtn.innerHTML = '<i class="fas fa-lightbulb"></i> Gợi ý từ khóa';
                hintBtn.disabled = false;
                
            } catch (error) {
                console.error('Error getting hint:', error);
                feedbackContentEl.innerHTML = "<p>Không thể tạo gợi ý. Vui lòng thử lại.</p>";
                feedbackSection.style.display = 'block';
                
                hintBtn.innerHTML = '<i class="fas fa-lightbulb"></i> Gợi ý từ khóa';
                hintBtn.disabled = false;
            }
        }

        // Submit current translation for review
        async function submitTranslation() {
            const userTranslation = currentTranslationEl.value.trim();
            const sentence = sentences[currentSentenceIndex];
            
            if (!userTranslation) {
                feedbackContentEl.innerHTML = "<p>Vui lòng nhập bản dịch trước khi kiểm tra.</p>";
                feedbackSection.style.display = 'block';
                return;
            }
            
            // Save user translation
            userTranslations[currentSentenceIndex] = userTranslation;
            
            // Get feedback from Gemini
            try {
                submitBtn.innerHTML = '<span class="loading"></span> Đang kiểm tra...';
                submitBtn.disabled = true;
                
                const prompt = `Hãy đánh giá bản dịch sau của câu tiếng Anh sang tiếng Việt. 
                Trả lời bằng tiếng Việt, ngắn gọn (dưới 100 từ), tập trung vào độ chính xác và tự nhiên.
                Sử dụng định dạng markdown để làm rõ các điểm quan trọng.
                Câu gốc: "${sentence}"
                Bản dịch: "${userTranslation}"`;
                
                const feedback = await callGeminiAPI(prompt);
                
                feedbackContentEl.innerHTML = marked.parse(feedback);
                feedbackSection.style.display = 'block';
                
                submitBtn.innerHTML = '<i class="fas fa-check"></i> Kiểm tra';
                submitBtn.disabled = false;
                
            } catch (error) {
                console.error('Error getting feedback:', error);
                feedbackContentEl.innerHTML = "<p>Không thể kiểm tra bản dịch. Vui lòng thử lại.</p>";
                feedbackSection.style.display = 'block';
                
                submitBtn.innerHTML = '<i class="fas fa-check"></i> Kiểm tra';
                submitBtn.disabled = false;
            }
        }

        // Go to next sentence
        function goToNextSentence() {
            if (currentSentenceIndex < sentences.length - 1) {
                currentSentenceIndex++;
                displayCurrentSentence();
            } else {
                // All sentences completed
                overallFeedbackContainer.style.display = 'block';
                overallFeedbackContainer.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Submit all for overall feedback
        submitAllBtn.addEventListener('click', async () => {
            // Get overall feedback from Gemini
            try {
                submitAllBtn.innerHTML = '<span class="loading"></span> Đang tạo đánh giá...';
                submitAllBtn.disabled = true;
                
                const fullTranslation = userTranslations.join(' ');
                const prompt = `Hãy đánh giá tổng thể bản dịch sau từ tiếng Anh sang tiếng Việt. 
                Văn bản gốc: "${currentText}"
                Bản dịch: "${fullTranslation}"
                Trả lời bằng tiếng Việt, khoảng 200-300 từ, sử dụng định dạng markdown để trình bày rõ ràng.
                Bao gồm:
                - **Điểm tốt**: Liệt kê những điểm tốt trong bản dịch
                - **Điểm cần cải thiện**: Liệt kê những điểm cần cải thiện
                - **Gợi ý**: Đưa ra gợi ý để cải thiện bản dịch
                - **Điểm số**: Cho điểm từ 1-10 với giải thích ngắn gọn`;
                
                const feedback = await callGeminiAPI(prompt);
                
                overallFeedback.innerHTML = marked.parse(feedback);
                submitAllBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Gửi Đánh Giá';
                submitAllBtn.disabled = false;
                
                // Show results summary
                showResultsSummary();
                
            } catch (error) {
                console.error('Error getting overall feedback:', error);
                overallFeedback.innerHTML = "<p>Không thể tạo đánh giá tổng thể. Vui lòng thử lại.</p>";
                submitAllBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Gửi Đánh Giá';
                submitAllBtn.disabled = false;
            }
        });

        // Show results summary
        function showResultsSummary() {
            resultsSummary.style.display = 'block';
            
            // Format original text with sentence numbers
            const originalWithNumbers = sentences.map((sentence, index) => 
                `<p><strong>${index + 1}.</strong> ${sentence}</p>`
            ).join('');
            
            // Format translations with sentence numbers
            const translationWithNumbers = userTranslations.map((translation, index) => 
                `<p><strong>${index + 1}.</strong> ${translation}</p>`
            ).join('');
            
            originalSummary.innerHTML = originalWithNumbers;
            translationSummary.innerHTML = translationWithNumbers;
            
            resultsSummary.scrollIntoView({ behavior: 'smooth' });
        }

        // New exercise
        newExerciseBtn.addEventListener('click', () => {
            exercisesSection.style.display = 'block';
            practiceSection.style.display = 'none';
            resultsSummary.style.display = 'none';
            exercisesSection.scrollIntoView({ behavior: 'smooth' });
        });

        // Event listeners
        hintBtn.addEventListener('click', showHint);
        submitBtn.addEventListener('click', submitTranslation);
        nextBtn.addEventListener('click', goToNextSentence);
        
        // Setup keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Phím Tab - focus vào ô dịch
            if (e.key === 'Tab') {
                e.preventDefault();
                currentTranslationEl.focus();
            }
            
            // Phím H - gợi ý
            if (e.key.toLowerCase() === 'h' && 
                document.activeElement.tagName !== 'INPUT' && 
                document.activeElement.tagName !== 'TEXTAREA') {
                e.preventDefault();
                showHint();
            }
        });
        
        currentTranslationEl.addEventListener('keydown', function(e) {
            // Enter - kiểm tra
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                submitTranslation();
            }
            
            // Shift + Enter - chuyển câu tiếp theo
            if (e.key === 'Enter' && e.shiftKey) {
                e.preventDefault();
                goToNextSentence();
            }
        });

        // Debug panel
        function logDebugInfo(title, content) {
            debugContent.innerHTML += `\n\n=== ${title} ===\n`;
            
            if (typeof content === 'object') {
                debugContent.innerHTML += JSON.stringify(content, null, 2);
            } else {
                debugContent.innerHTML += content;
            }
            
            debugPanel.style.display = 'block';
        }
        
        debugToggle.addEventListener('click', () => {
            const isVisible = debugContent.style.display !== 'none';
            debugContent.style.display = isVisible ? 'none' : 'block';
            debugToggle.innerHTML = isVisible 
                ? '<i class="fas fa-bug"></i> Hiển thị thông tin gỡ lỗi' 
                : '<i class="fas fa-bug"></i> Ẩn thông tin gỡ lỗi';
        });
    </script>

<!-- Gemini Chat Bubble -->
    <div id="gemini-bubble-container">
        <div id="gemini-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z" fill="white"/>
                <path d="M12 6C8.69 6 6 8.69 6 12C6 15.31 8.69 18 12 18C15.31 18 18 15.31 18 12C18 8.69 15.31 6 12 6ZM12 16C9.79 16 8 14.21 8 12C8 9.79 9.79 8 12 8C14.21 8 16 9.79 16 12C16 14.21 14.21 16 12 16Z" fill="white"/>
                <circle cx="12" cy="12" r="2" fill="white"/>
            </svg>
        </div>
        <div id="gemini-chat-container">
            <div class="chat-header">
                <h3>Gemini AI Assistant</h3>
                <div class="header-controls">
                    <button class="settings-btn"><i class="fas fa-cog"></i></button>
                    <button class="close-btn">×</button>
                </div>
            </div>
            <div class="chat-body">
                <div class="message bot-message">
                    <div class="bot-message-content">
                        <p>Xin chào! Tôi là trợ lý Gemini AI.</p>
                        <p>Để bắt đầu:</p>
                        <ol>
                            <li>Nhấn biểu tượng <i class="fas fa-cog"></i> để mở cài đặt</li>
                            <li>Nhập API Key Gemini của bạn</li>
                            <li>Nhấn "Lưu" và bắt đầu trò chuyện</li>
                        </ol>
                        <p>Bạn có thể hỏi tôi bất kỳ điều gì!</p>
                    </div>
                </div>
            </div>
            <div class="api-settings">
                <div class="api-input">
                    <input type="password" id="api-key-input" placeholder="Nhập API Key Gemini">
                    <button id="save-api-key">Lưu</button>
                </div>
                <div class="api-status" id="api-status">
                    <i class="fas fa-info-circle"></i> <span>API Key chưa được cài đặt</span>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="user-input" placeholder="Nhập câu hỏi...">
                <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>
   <!-- End Gemini Chat Bubble -->
<script src="../assistant.js"></script>
</body>
</html>